!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("rxjs"),require("@angular/common"),require("rxjs/operators")):"function"==typeof define&&define.amd?define("ng-in-viewport",["exports","@angular/core","rxjs","@angular/common","rxjs/operators"],e):e(t["ng-in-viewport"]={},t.ng.core,t.rxjs,t.ng.common,t.rxjs.operators)}(this,function(t,n,o,r,i){"use strict";function s(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,i=r.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(n=i.next()).done;)s.push(n.value)}catch(c){o={error:c}}finally{try{n&&!n.done&&(r=i["return"])&&r.call(i)}finally{if(o)throw o.error}}return s}function c(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}var u={BOTH:"both",VERTICAL:"vertical",HORIZONTAL:"horizontal"},a=[0,1],f=function(){function t(e){var r=this;this._rootMargin="0px 0px 0px 0px",this._threshold=c(a),this._partial=!0,this._direction=u.BOTH,"[object Object]"===Object.prototype.toString.call(e)&&["root","rootMargin","threshold","partial","direction","checkFn"].forEach(function(t){e.hasOwnProperty(t)&&(r[t]=e[t])})}return Object.defineProperty(t.prototype,"root",{get:function(){return this._root},set:function(t){this._root=t&&1===t.nodeType?t:undefined},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rootMargin",{get:function(){return this._rootMargin},set:function(t){this._rootMargin=t&&"string"==typeof t?t:"0px 0px 0px 0px"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"threshold",{get:function(){return this._threshold},set:function(t){var e=[],r=function(t){return"number"==typeof t&&0<=t&&t<=1};r(t)?e=[t]:Array.isArray(t)&&t.length&&(e=t.filter(function(t){return r(t)})),0===e.length&&(e=c(a)),this._threshold=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"partial",{get:function(){return this._partial},set:function(t){this._partial=!!t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"direction",{get:function(){return this._direction},set:function(t){var e;this._direction=(e=t,0<=[u.BOTH,u.HORIZONTAL,u.VERTICAL].indexOf(e)?t:u.BOTH)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkFn",{get:function(){return this._checkFn},set:function(t){this._checkFn=t},enumerable:!0,configurable:!0}),t}(),e=function(){function t(t){this.ngZone=t,this.trigger$=new o.Subject,this.registry=[]}return t.prototype.emitTrigger=function(t){var e=this;Array.isArray(t)&&t.length&&t.forEach(function(t){return e.trigger$.next(t)})},t.prototype.getRootElement=function(t){return t&&t.nodeType===Node.ELEMENT_NODE?t:undefined},t.prototype.findEntry=function(e){var r=this;return this.registry.find(function(t){return t.root===r.getRootElement(e)})},t.prototype.register=function(n,o){var i=this;this.ngZone.runOutsideAngular(function(){var t=i.findEntry(o.root);if(t&&!t.targets.has(n))t.targets.add(n),t.observer.observe(n);else{var e={root:i.getRootElement(o.root),rootMargin:o.rootMargin,threshold:o.threshold},r={root:i.getRootElement(o.root),targets:new Set([n]),observer:new IntersectionObserver(function(t){return i.ngZone.run(function(){return i.emitTrigger(t)})},e)};r.observer.observe(n),i.registry=c(i.registry,[r])}})},t.prototype.unregister=function(n,o){var i=this;this.ngZone.runOutsideAngular(function(){var e=i.findEntry(o.root);if(e){var t=e.observer,r=e.targets;r.has(n)&&(t.unobserve(n),r["delete"](n)),0===r.size&&(t.disconnect(),i.registry=i.registry.filter(function(t){return t!==e}))}})},t.decorators=[{type:n.Injectable,args:[{providedIn:"root"}]}],t.ctorParameters=function(){return[{type:n.NgZone}]},t.ngInjectableDef=n.defineInjectable({factory:function(){return new t(n.inject(n.NgZone))},token:t,providedIn:"root"}),t}(),p=Symbol("InViewportMetadata"),g=function(){function t(t,e,r){this.platformId=t,this.elementRef=e,this.inViewport=r,this.config=new f,this.subscription=new o.Subscription,this.inViewportAction=new n.EventEmitter}return Object.defineProperty(t.prototype,"options",{set:function(t){this.config=new f(t)},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){var e=this;r.isPlatformBrowser(this.platformId)?(this.inViewport.register(this.elementRef.nativeElement,this.config),this.subscription.add(this.inViewport.trigger$.pipe(i.filter(function(t){return t&&t.target===e.elementRef.nativeElement})).subscribe(function(t){return e.emitAction(t,!1)}))):this.emitAction(undefined,!0)},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe(),r.isPlatformBrowser(this.platformId)&&this.inViewport.unregister(this.elementRef.nativeElement,this.config)},t.prototype.check=function(t,e){var r,n,o,i=this,s=e||!t||(r=t.isIntersecting||0<t.intersectionRatio,n=1<=t.intersectionRatio,i.config.partial?r:n);return(o={})[p]={entry:t},o.target=this.elementRef.nativeElement,o.visible=s,o},t.prototype.emitAction=function(t,e){var r=this.config.checkFn?this.config.checkFn(t,{force:e,config:this.config}):this.check(t,e);this.inViewportAction.emit(r)},t.decorators=[{type:n.Directive,args:[{selector:"[inViewport]"}]}],t.ctorParameters=function(){return[{type:Object,decorators:[{type:n.Inject,args:[n.PLATFORM_ID]}]},{type:n.ElementRef},{type:e}]},t.propDecorators={options:[{type:n.Input,args:["inViewportOptions"]}],inViewportAction:[{type:n.Output}]},t}(),h=function(){function t(){}return t.decorators=[{type:n.NgModule,args:[{imports:[r.CommonModule],declarations:[g],exports:[g]}]}],t}();t.InViewportModule=h,t.InViewportMetadata=p,t.InViewportDirective=g,t.InViewportService=e,t.InViewportConfigDirection=u,t.InViewportConfig=f,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ng-in-viewport.umd.min.js.map