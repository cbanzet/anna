import { Injectable, NgZone, NgModule, Directive, ElementRef, EventEmitter, Inject, Input, Output, PLATFORM_ID, defineInjectable, inject } from '@angular/core';
import { Subject, Subscription } from 'rxjs';
import { isPlatformBrowser, CommonModule } from '@angular/common';
import { filter } from 'rxjs/operators';

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
/** @enum {string} */
const InViewportConfigDirection = {
    BOTH: 'both',
    VERTICAL: 'vertical',
    HORIZONTAL: 'horizontal',
};
const /** @type {?} */ DEFAULT_THRESHOLD = [0, 1];
class InViewportConfig {
    /**
     * @param {?=} options
     */
    constructor(options) {
        this._rootMargin = '0px 0px 0px 0px';
        this._threshold = [...DEFAULT_THRESHOLD];
        this._partial = true;
        this._direction = InViewportConfigDirection.BOTH;
        if (Object.prototype.toString.call(options) === '[object Object]') {
            ['root', 'rootMargin', 'threshold', 'partial', 'direction', 'checkFn'].forEach((prop) => {
                if (options.hasOwnProperty(prop)) {
                    this[prop] = options[prop];
                }
            });
        }
    }
    /**
     * @return {?}
     */
    get root() {
        return this._root;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set root(value) {
        this._root = value && value.nodeType === 1 ? value : undefined;
    }
    /**
     * @return {?}
     */
    get rootMargin() {
        return this._rootMargin;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set rootMargin(value) {
        this._rootMargin = value && typeof value === 'string' ? value : '0px 0px 0px 0px';
    }
    /**
     * @return {?}
     */
    get threshold() {
        return this._threshold;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set threshold(value) {
        let /** @type {?} */ threshold = [];
        const /** @type {?} */ isValidThreshold = (val) => typeof val === 'number' && val >= 0 && val <= 1;
        if (isValidThreshold(value)) {
            threshold = [value];
        }
        else if (Array.isArray(value) && value.length) {
            threshold = value.filter((val) => isValidThreshold(val));
        }
        if (threshold.length === 0) {
            threshold = [...DEFAULT_THRESHOLD];
        }
        this._threshold = threshold;
    }
    /**
     * @return {?}
     */
    get partial() {
        return this._partial;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set partial(value) {
        this._partial = !!value;
    }
    /**
     * @return {?}
     */
    get direction() {
        return this._direction;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set direction(value) {
        const /** @type {?} */ isValidValue = (val) => {
            return ([
                InViewportConfigDirection.BOTH,
                InViewportConfigDirection.HORIZONTAL,
                InViewportConfigDirection.VERTICAL
            ].indexOf(val) >= 0);
        };
        this._direction = isValidValue(value) ? value : InViewportConfigDirection.BOTH;
    }
    /**
     * @return {?}
     */
    get checkFn() {
        return this._checkFn;
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set checkFn(value) {
        this._checkFn = value;
    }
}

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class InViewportService {
    /**
     * @param {?} ngZone
     */
    constructor(ngZone) {
        this.ngZone = ngZone;
        this.trigger$ = new Subject();
        this.registry = [];
    }
    /**
     * @param {?} entries
     * @return {?}
     */
    emitTrigger(entries) {
        if (Array.isArray(entries) && entries.length) {
            entries.forEach((entry) => this.trigger$.next(entry));
        }
    }
    /**
     * @param {?=} element
     * @return {?}
     */
    getRootElement(element) {
        return element && element.nodeType === Node.ELEMENT_NODE ? element : undefined;
    }
    /**
     * @param {?} root
     * @return {?}
     */
    findEntry(root) {
        return this.registry.find((entry) => entry.root === this.getRootElement(root));
    }
    /**
     * @param {?} target
     * @param {?} config
     * @return {?}
     */
    register(target, config) {
        this.ngZone.runOutsideAngular(() => {
            const /** @type {?} */ foundedEntry = this.findEntry(config.root);
            if (foundedEntry && !foundedEntry.targets.has(target)) {
                foundedEntry.targets.add(target);
                foundedEntry.observer.observe(target);
            }
            else {
                const /** @type {?} */ options = {
                    root: this.getRootElement(config.root),
                    rootMargin: config.rootMargin,
                    threshold: config.threshold
                };
                const /** @type {?} */ entry = {
                    root: this.getRootElement(config.root),
                    targets: new Set([target]),
                    observer: new IntersectionObserver((entries) => this.ngZone.run(() => this.emitTrigger(entries)), options)
                };
                entry.observer.observe(target);
                this.registry = [...this.registry, entry];
            }
        });
    }
    /**
     * @param {?} target
     * @param {?} config
     * @return {?}
     */
    unregister(target, config) {
        this.ngZone.runOutsideAngular(() => {
            const /** @type {?} */ foundedEntry = this.findEntry(config.root);
            if (foundedEntry) {
                const { observer, targets } = foundedEntry;
                if (targets.has(target)) {
                    observer.unobserve(target);
                    targets.delete(target);
                }
                if (targets.size === 0) {
                    observer.disconnect();
                    this.registry = this.registry.filter((entry) => entry !== foundedEntry);
                }
            }
        });
    }
}
InViewportService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] },
];
/** @nocollapse */
InViewportService.ctorParameters = () => [
    { type: NgZone, },
];
/** @nocollapse */ InViewportService.ngInjectableDef = defineInjectable({ factory: function InViewportService_Factory() { return new InViewportService(inject(NgZone)); }, token: InViewportService, providedIn: "root" });

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
const /** @type {?} */ InViewportMetadata = Symbol('InViewportMetadata');
class InViewportDirective {
    /**
     * @param {?} platformId
     * @param {?} elementRef
     * @param {?} inViewport
     */
    constructor(platformId, elementRef, inViewport) {
        this.platformId = platformId;
        this.elementRef = elementRef;
        this.inViewport = inViewport;
        this.config = new InViewportConfig();
        this.subscription = new Subscription();
        this.inViewportAction = new EventEmitter();
    }
    /**
     * @param {?} value
     * @return {?}
     */
    set options(value) {
        this.config = new InViewportConfig(value);
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        if (isPlatformBrowser(this.platformId)) {
            this.inViewport.register(this.elementRef.nativeElement, this.config);
            this.subscription.add(this.inViewport.trigger$
                .pipe(filter((entry) => entry && entry.target === this.elementRef.nativeElement))
                .subscribe((entry) => this.emitAction(entry, false)));
        }
        else {
            this.emitAction(undefined, true);
        }
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        this.subscription.unsubscribe();
        if (isPlatformBrowser(this.platformId)) {
            this.inViewport.unregister(this.elementRef.nativeElement, this.config);
        }
    }
    /**
     * @param {?} entry
     * @param {?} force
     * @return {?}
     */
    check(entry, force) {
        const /** @type {?} */ isVisible = () => {
            const /** @type {?} */ partiallyVisible = entry.isIntersecting || entry.intersectionRatio > 0;
            const /** @type {?} */ completelyVisible = entry.intersectionRatio >= 1;
            return this.config.partial ? partiallyVisible : completelyVisible;
        };
        const /** @type {?} */ visible = force || !entry || isVisible();
        return { [InViewportMetadata]: { entry }, target: this.elementRef.nativeElement, visible };
    }
    /**
     * @param {?} entry
     * @param {?} force
     * @return {?}
     */
    emitAction(entry, force) {
        const /** @type {?} */ event = this.config.checkFn
            ? this.config.checkFn(entry, { force, config: this.config })
            : this.check(entry, force);
        this.inViewportAction.emit(event);
    }
}
InViewportDirective.decorators = [
    { type: Directive, args: [{
                selector: '[inViewport]'
            },] },
];
/** @nocollapse */
InViewportDirective.ctorParameters = () => [
    { type: Object, decorators: [{ type: Inject, args: [PLATFORM_ID,] },] },
    { type: ElementRef, },
    { type: InViewportService, },
];
InViewportDirective.propDecorators = {
    "options": [{ type: Input, args: ['inViewportOptions',] },],
    "inViewportAction": [{ type: Output },],
};

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
class InViewportModule {
}
InViewportModule.decorators = [
    { type: NgModule, args: [{
                imports: [CommonModule],
                declarations: [InViewportDirective],
                exports: [InViewportDirective]
            },] },
];

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */

export { InViewportModule, InViewportMetadata, InViewportDirective, InViewportService, InViewportConfigDirection, InViewportConfig };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctaW4tdmlld3BvcnQuanMubWFwIiwic291cmNlcyI6WyJuZzovL25nLWluLXZpZXdwb3J0L2xpYi9pbi12aWV3cG9ydC1jb25maWcudHMiLCJuZzovL25nLWluLXZpZXdwb3J0L2xpYi9pbi12aWV3cG9ydC5zZXJ2aWNlLnRzIiwibmc6Ly9uZy1pbi12aWV3cG9ydC9saWIvaW4tdmlld3BvcnQuZGlyZWN0aXZlLnRzIiwibmc6Ly9uZy1pbi12aWV3cG9ydC9saWIvaW4tdmlld3BvcnQubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBlbnVtIEluVmlld3BvcnRDb25maWdEaXJlY3Rpb24ge1xuICBCT1RIID0gJ2JvdGgnLFxuICBWRVJUSUNBTCA9ICd2ZXJ0aWNhbCcsXG4gIEhPUklaT05UQUwgPSAnaG9yaXpvbnRhbCdcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJblZpZXdwb3J0Q29uZmlnQ2hlY2tGbk9wdGlvbnMge1xuICBmb3JjZTogYm9vbGVhbjtcbiAgY29uZmlnOiBJblZpZXdwb3J0Q29uZmlnO1xufVxuXG5leHBvcnQgdHlwZSBJblZpZXdwb3J0Q29uZmlnQ2hlY2tGbiA9IChcbiAgZW50cnk6IEludGVyc2VjdGlvbk9ic2VydmVyRW50cnksXG4gIG9wdGlvbnM6IEluVmlld3BvcnRDb25maWdDaGVja0ZuT3B0aW9uc1xuKSA9PiBhbnk7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5WaWV3cG9ydENvbmZpZ09wdGlvbnMge1xuICByb290PzogRWxlbWVudDtcbiAgcm9vdE1hcmdpbj86IHN0cmluZztcbiAgdGhyZXNob2xkPzogbnVtYmVyIHwgbnVtYmVyW107XG4gIHBhcnRpYWw/OiBib29sZWFuO1xuICBkaXJlY3Rpb24/OiBJblZpZXdwb3J0Q29uZmlnRGlyZWN0aW9uO1xuICBjaGVja0ZuPzogSW5WaWV3cG9ydENvbmZpZ0NoZWNrRm47XG59XG5cbmNvbnN0IERFRkFVTFRfVEhSRVNIT0xEID0gWzAsIDFdO1xuXG5leHBvcnQgY2xhc3MgSW5WaWV3cG9ydENvbmZpZyB7XG4gIHByaXZhdGUgX3Jvb3Q6IEVsZW1lbnQ7XG4gIHByaXZhdGUgX3Jvb3RNYXJnaW46IHN0cmluZyA9ICcwcHggMHB4IDBweCAwcHgnO1xuICBwcml2YXRlIF90aHJlc2hvbGQ6IG51bWJlciB8IG51bWJlcltdID0gWy4uLkRFRkFVTFRfVEhSRVNIT0xEXTtcbiAgcHJpdmF0ZSBfcGFydGlhbDogYm9vbGVhbiA9IHRydWU7XG4gIHByaXZhdGUgX2RpcmVjdGlvbjogSW5WaWV3cG9ydENvbmZpZ0RpcmVjdGlvbiA9IEluVmlld3BvcnRDb25maWdEaXJlY3Rpb24uQk9USDtcbiAgcHJpdmF0ZSBfY2hlY2tGbjogSW5WaWV3cG9ydENvbmZpZ0NoZWNrRm47XG5cbiAgY29uc3RydWN0b3Iob3B0aW9ucz86IEluVmlld3BvcnRDb25maWdPcHRpb25zKSB7XG4gICAgaWYgKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvcHRpb25zKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgIFsncm9vdCcsICdyb290TWFyZ2luJywgJ3RocmVzaG9sZCcsICdwYXJ0aWFsJywgJ2RpcmVjdGlvbicsICdjaGVja0ZuJ10uZm9yRWFjaCgocHJvcCkgPT4ge1xuICAgICAgICBpZiAob3B0aW9ucy5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICAgIHRoaXNbcHJvcF0gPSBvcHRpb25zW3Byb3BdO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0IHJvb3QoKTogRWxlbWVudCB7XG4gICAgcmV0dXJuIHRoaXMuX3Jvb3Q7XG4gIH1cblxuICBwdWJsaWMgc2V0IHJvb3QodmFsdWU6IEVsZW1lbnQpIHtcbiAgICB0aGlzLl9yb290ID0gdmFsdWUgJiYgdmFsdWUubm9kZVR5cGUgPT09IDEgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgcm9vdE1hcmdpbigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9yb290TWFyZ2luO1xuICB9XG5cbiAgcHVibGljIHNldCByb290TWFyZ2luKHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLl9yb290TWFyZ2luID0gdmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogJzBweCAwcHggMHB4IDBweCc7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHRocmVzaG9sZCgpOiBudW1iZXIgfCBudW1iZXJbXSB7XG4gICAgcmV0dXJuIHRoaXMuX3RocmVzaG9sZDtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgdGhyZXNob2xkKHZhbHVlOiBudW1iZXIgfCBudW1iZXJbXSkge1xuICAgIGxldCB0aHJlc2hvbGQgPSBbXTtcbiAgICBjb25zdCBpc1ZhbGlkVGhyZXNob2xkID0gKHZhbDogYW55KSA9PiB0eXBlb2YgdmFsID09PSAnbnVtYmVyJyAmJiB2YWwgPj0gMCAmJiB2YWwgPD0gMTtcbiAgICBpZiAoaXNWYWxpZFRocmVzaG9sZCh2YWx1ZSkpIHtcbiAgICAgIHRocmVzaG9sZCA9IFt2YWx1ZV07XG4gICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGgpIHtcbiAgICAgIHRocmVzaG9sZCA9IHZhbHVlLmZpbHRlcigodmFsKSA9PiBpc1ZhbGlkVGhyZXNob2xkKHZhbCkpO1xuICAgIH1cbiAgICBpZiAodGhyZXNob2xkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyZXNob2xkID0gWy4uLkRFRkFVTFRfVEhSRVNIT0xEXTtcbiAgICB9XG4gICAgdGhpcy5fdGhyZXNob2xkID0gdGhyZXNob2xkO1xuICB9XG5cbiAgcHVibGljIGdldCBwYXJ0aWFsKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9wYXJ0aWFsO1xuICB9XG5cbiAgcHVibGljIHNldCBwYXJ0aWFsKHZhbHVlOiBib29sZWFuKSB7XG4gICAgdGhpcy5fcGFydGlhbCA9ICEhdmFsdWU7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGRpcmVjdGlvbigpOiBJblZpZXdwb3J0Q29uZmlnRGlyZWN0aW9uIHtcbiAgICByZXR1cm4gdGhpcy5fZGlyZWN0aW9uO1xuICB9XG5cbiAgcHVibGljIHNldCBkaXJlY3Rpb24odmFsdWU6IEluVmlld3BvcnRDb25maWdEaXJlY3Rpb24pIHtcbiAgICBjb25zdCBpc1ZhbGlkVmFsdWUgPSAodmFsOiBhbnkpID0+IHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIFtcbiAgICAgICAgICBJblZpZXdwb3J0Q29uZmlnRGlyZWN0aW9uLkJPVEgsXG4gICAgICAgICAgSW5WaWV3cG9ydENvbmZpZ0RpcmVjdGlvbi5IT1JJWk9OVEFMLFxuICAgICAgICAgIEluVmlld3BvcnRDb25maWdEaXJlY3Rpb24uVkVSVElDQUxcbiAgICAgICAgXS5pbmRleE9mKHZhbCkgPj0gMFxuICAgICAgKTtcbiAgICB9O1xuICAgIHRoaXMuX2RpcmVjdGlvbiA9IGlzVmFsaWRWYWx1ZSh2YWx1ZSkgPyB2YWx1ZSA6IEluVmlld3BvcnRDb25maWdEaXJlY3Rpb24uQk9USDtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgY2hlY2tGbigpOiBJblZpZXdwb3J0Q29uZmlnQ2hlY2tGbiB7XG4gICAgcmV0dXJuIHRoaXMuX2NoZWNrRm47XG4gIH1cblxuICBwdWJsaWMgc2V0IGNoZWNrRm4odmFsdWU6IEluVmlld3BvcnRDb25maWdDaGVja0ZuKSB7XG4gICAgdGhpcy5fY2hlY2tGbiA9IHZhbHVlO1xuICB9XG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlLCBOZ1pvbmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzJztcbmltcG9ydCB7IEluVmlld3BvcnRDb25maWcgfSBmcm9tICcuL2luLXZpZXdwb3J0LWNvbmZpZyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5WaWV3cG9ydFJlZ2lzdHJ5RW50cnkge1xuICByb290OiBFbGVtZW50O1xuICB0YXJnZXRzOiBTZXQ8RWxlbWVudD47XG4gIG9ic2VydmVyOiBJbnRlcnNlY3Rpb25PYnNlcnZlcjtcbn1cblxuZXhwb3J0IHR5cGUgSW5WaWV3cG9ydFRyaWdnZXIgPSBTdWJqZWN0PEludGVyc2VjdGlvbk9ic2VydmVyRW50cnk+O1xuZXhwb3J0IHR5cGUgSW5WaWV3cG9ydFJlZ2lzdHJ5ID0gSW5WaWV3cG9ydFJlZ2lzdHJ5RW50cnlbXTtcblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5leHBvcnQgY2xhc3MgSW5WaWV3cG9ydFNlcnZpY2Uge1xuICBwdWJsaWMgcmVhZG9ubHkgdHJpZ2dlciQ6IEluVmlld3BvcnRUcmlnZ2VyID0gbmV3IFN1YmplY3Q8SW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeT4oKTtcbiAgcHJpdmF0ZSByZWdpc3RyeTogSW5WaWV3cG9ydFJlZ2lzdHJ5ID0gW107XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBuZ1pvbmU6IE5nWm9uZSkge31cblxuICBwcml2YXRlIGVtaXRUcmlnZ2VyKGVudHJpZXM6IEludGVyc2VjdGlvbk9ic2VydmVyRW50cnlbXSkge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGVudHJpZXMpICYmIGVudHJpZXMubGVuZ3RoKSB7XG4gICAgICBlbnRyaWVzLmZvckVhY2goKGVudHJ5KSA9PiB0aGlzLnRyaWdnZXIkLm5leHQoZW50cnkpKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldFJvb3RFbGVtZW50KGVsZW1lbnQ/OiBFbGVtZW50KSB7XG4gICAgcmV0dXJuIGVsZW1lbnQgJiYgZWxlbWVudC5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUgPyBlbGVtZW50IDogdW5kZWZpbmVkO1xuICB9XG5cbiAgcHJpdmF0ZSBmaW5kRW50cnkocm9vdDogRWxlbWVudCkge1xuICAgIHJldHVybiB0aGlzLnJlZ2lzdHJ5LmZpbmQoKGVudHJ5KSA9PiBlbnRyeS5yb290ID09PSB0aGlzLmdldFJvb3RFbGVtZW50KHJvb3QpKTtcbiAgfVxuXG4gIHB1YmxpYyByZWdpc3Rlcih0YXJnZXQ6IEVsZW1lbnQsIGNvbmZpZzogSW5WaWV3cG9ydENvbmZpZyk6IHZvaWQge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIGNvbnN0IGZvdW5kZWRFbnRyeSA9IHRoaXMuZmluZEVudHJ5KGNvbmZpZy5yb290KTtcbiAgICAgIGlmIChmb3VuZGVkRW50cnkgJiYgIWZvdW5kZWRFbnRyeS50YXJnZXRzLmhhcyh0YXJnZXQpKSB7XG4gICAgICAgIGZvdW5kZWRFbnRyeS50YXJnZXRzLmFkZCh0YXJnZXQpO1xuICAgICAgICBmb3VuZGVkRW50cnkub2JzZXJ2ZXIub2JzZXJ2ZSh0YXJnZXQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgb3B0aW9uczogYW55ID0ge1xuICAgICAgICAgIHJvb3Q6IHRoaXMuZ2V0Um9vdEVsZW1lbnQoY29uZmlnLnJvb3QpLFxuICAgICAgICAgIHJvb3RNYXJnaW46IGNvbmZpZy5yb290TWFyZ2luLFxuICAgICAgICAgIHRocmVzaG9sZDogY29uZmlnLnRocmVzaG9sZFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBlbnRyeTogSW5WaWV3cG9ydFJlZ2lzdHJ5RW50cnkgPSB7XG4gICAgICAgICAgcm9vdDogdGhpcy5nZXRSb290RWxlbWVudChjb25maWcucm9vdCksXG4gICAgICAgICAgdGFyZ2V0czogbmV3IFNldChbdGFyZ2V0XSksXG4gICAgICAgICAgb2JzZXJ2ZXI6IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihcbiAgICAgICAgICAgIChlbnRyaWVzOiBJbnRlcnNlY3Rpb25PYnNlcnZlckVudHJ5W10pID0+IHRoaXMubmdab25lLnJ1bigoKSA9PiB0aGlzLmVtaXRUcmlnZ2VyKGVudHJpZXMpKSxcbiAgICAgICAgICAgIG9wdGlvbnNcbiAgICAgICAgICApXG4gICAgICAgIH07XG4gICAgICAgIGVudHJ5Lm9ic2VydmVyLm9ic2VydmUodGFyZ2V0KTtcbiAgICAgICAgdGhpcy5yZWdpc3RyeSA9IFsuLi50aGlzLnJlZ2lzdHJ5LCBlbnRyeV07XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgdW5yZWdpc3Rlcih0YXJnZXQ6IEVsZW1lbnQsIGNvbmZpZzogSW5WaWV3cG9ydENvbmZpZyk6IHZvaWQge1xuICAgIHRoaXMubmdab25lLnJ1bk91dHNpZGVBbmd1bGFyKCgpID0+IHtcbiAgICAgIGNvbnN0IGZvdW5kZWRFbnRyeSA9IHRoaXMuZmluZEVudHJ5KGNvbmZpZy5yb290KTtcbiAgICAgIGlmIChmb3VuZGVkRW50cnkpIHtcbiAgICAgICAgY29uc3QgeyBvYnNlcnZlciwgdGFyZ2V0cyB9ID0gZm91bmRlZEVudHJ5O1xuICAgICAgICBpZiAodGFyZ2V0cy5oYXModGFyZ2V0KSkge1xuICAgICAgICAgIG9ic2VydmVyLnVub2JzZXJ2ZSh0YXJnZXQpO1xuICAgICAgICAgIHRhcmdldHMuZGVsZXRlKHRhcmdldCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRhcmdldHMuc2l6ZSA9PT0gMCkge1xuICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICB0aGlzLnJlZ2lzdHJ5ID0gdGhpcy5yZWdpc3RyeS5maWx0ZXIoKGVudHJ5KSA9PiBlbnRyeSAhPT0gZm91bmRlZEVudHJ5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCJpbXBvcnQge1xuICBBZnRlclZpZXdJbml0LFxuICBEaXJlY3RpdmUsXG4gIEVsZW1lbnRSZWYsXG4gIEV2ZW50RW1pdHRlcixcbiAgSW5qZWN0LFxuICBJbnB1dCxcbiAgT25EZXN0cm95LFxuICBPdXRwdXQsXG4gIFBMQVRGT1JNX0lEXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgaXNQbGF0Zm9ybUJyb3dzZXIgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBmaWx0ZXIgfSBmcm9tICdyeGpzL29wZXJhdG9ycyc7XG5cbmltcG9ydCB7IEluVmlld3BvcnRDb25maWcsIEluVmlld3BvcnRDb25maWdPcHRpb25zIH0gZnJvbSAnLi9pbi12aWV3cG9ydC1jb25maWcnO1xuaW1wb3J0IHsgSW5WaWV3cG9ydFNlcnZpY2UgfSBmcm9tICcuL2luLXZpZXdwb3J0LnNlcnZpY2UnO1xuXG5leHBvcnQgY29uc3QgSW5WaWV3cG9ydE1ldGFkYXRhID0gU3ltYm9sKCdJblZpZXdwb3J0TWV0YWRhdGEnKTtcblxuQERpcmVjdGl2ZSh7XG4gIHNlbGVjdG9yOiAnW2luVmlld3BvcnRdJ1xufSlcbmV4cG9ydCBjbGFzcyBJblZpZXdwb3J0RGlyZWN0aXZlIGltcGxlbWVudHMgQWZ0ZXJWaWV3SW5pdCwgT25EZXN0cm95IHtcbiAgcHJpdmF0ZSBjb25maWc6IEluVmlld3BvcnRDb25maWcgPSBuZXcgSW5WaWV3cG9ydENvbmZpZygpO1xuICBwcml2YXRlIHJlYWRvbmx5IHN1YnNjcmlwdGlvbjogU3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuXG4gIEBJbnB1dCgnaW5WaWV3cG9ydE9wdGlvbnMnKVxuICBwcml2YXRlIHNldCBvcHRpb25zKHZhbHVlOiBJblZpZXdwb3J0Q29uZmlnT3B0aW9ucykge1xuICAgIHRoaXMuY29uZmlnID0gbmV3IEluVmlld3BvcnRDb25maWcodmFsdWUpO1xuICB9XG5cbiAgQE91dHB1dCgpIHB1YmxpYyByZWFkb25seSBpblZpZXdwb3J0QWN0aW9uOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIEBJbmplY3QoUExBVEZPUk1fSUQpIHByaXZhdGUgcGxhdGZvcm1JZDogT2JqZWN0LFxuICAgIHByaXZhdGUgZWxlbWVudFJlZjogRWxlbWVudFJlZixcbiAgICBwcml2YXRlIGluVmlld3BvcnQ6IEluVmlld3BvcnRTZXJ2aWNlXG4gICkge31cblxuICBwdWJsaWMgbmdBZnRlclZpZXdJbml0KCk6IHZvaWQge1xuICAgIGlmIChpc1BsYXRmb3JtQnJvd3Nlcih0aGlzLnBsYXRmb3JtSWQpKSB7XG4gICAgICB0aGlzLmluVmlld3BvcnQucmVnaXN0ZXIodGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsIHRoaXMuY29uZmlnKTtcbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9uLmFkZChcbiAgICAgICAgdGhpcy5pblZpZXdwb3J0LnRyaWdnZXIkXG4gICAgICAgICAgLnBpcGUoZmlsdGVyKChlbnRyeTogSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeSkgPT4gZW50cnkgJiYgZW50cnkudGFyZ2V0ID09PSB0aGlzLmVsZW1lbnRSZWYubmF0aXZlRWxlbWVudCkpXG4gICAgICAgICAgLnN1YnNjcmliZSgoZW50cnk6IEludGVyc2VjdGlvbk9ic2VydmVyRW50cnkpID0+IHRoaXMuZW1pdEFjdGlvbihlbnRyeSwgZmFsc2UpKVxuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbWl0QWN0aW9uKHVuZGVmaW5lZCwgdHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG5nT25EZXN0cm95KCk6IHZvaWQge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgaWYgKGlzUGxhdGZvcm1Ccm93c2VyKHRoaXMucGxhdGZvcm1JZCkpIHtcbiAgICAgIHRoaXMuaW5WaWV3cG9ydC51bnJlZ2lzdGVyKHRoaXMuZWxlbWVudFJlZi5uYXRpdmVFbGVtZW50LCB0aGlzLmNvbmZpZyk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjaGVjayhlbnRyeTogSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeSwgZm9yY2U6IGJvb2xlYW4pIHtcbiAgICBjb25zdCBpc1Zpc2libGUgPSAoKSA9PiB7XG4gICAgICBjb25zdCBwYXJ0aWFsbHlWaXNpYmxlID0gZW50cnkuaXNJbnRlcnNlY3RpbmcgfHwgZW50cnkuaW50ZXJzZWN0aW9uUmF0aW8gPiAwO1xuICAgICAgY29uc3QgY29tcGxldGVseVZpc2libGUgPSBlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyA+PSAxO1xuICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLnBhcnRpYWwgPyBwYXJ0aWFsbHlWaXNpYmxlIDogY29tcGxldGVseVZpc2libGU7XG4gICAgfTtcbiAgICBjb25zdCB2aXNpYmxlID0gZm9yY2UgfHwgIWVudHJ5IHx8IGlzVmlzaWJsZSgpO1xuICAgIHJldHVybiB7IFtJblZpZXdwb3J0TWV0YWRhdGFdOiB7IGVudHJ5IH0sIHRhcmdldDogdGhpcy5lbGVtZW50UmVmLm5hdGl2ZUVsZW1lbnQsIHZpc2libGUgfTtcbiAgfVxuXG4gIHByaXZhdGUgZW1pdEFjdGlvbihlbnRyeTogSW50ZXJzZWN0aW9uT2JzZXJ2ZXJFbnRyeSwgZm9yY2U6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBjb25zdCBldmVudCA9IHRoaXMuY29uZmlnLmNoZWNrRm5cbiAgICAgID8gdGhpcy5jb25maWcuY2hlY2tGbihlbnRyeSwgeyBmb3JjZSwgY29uZmlnOiB0aGlzLmNvbmZpZyB9KVxuICAgICAgOiB0aGlzLmNoZWNrKGVudHJ5LCBmb3JjZSk7XG4gICAgdGhpcy5pblZpZXdwb3J0QWN0aW9uLmVtaXQoZXZlbnQpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tbW9uTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uJztcbmltcG9ydCB7IEluVmlld3BvcnREaXJlY3RpdmUgfSBmcm9tICcuL2luLXZpZXdwb3J0LmRpcmVjdGl2ZSc7XG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtDb21tb25Nb2R1bGVdLFxuICBkZWNsYXJhdGlvbnM6IFtJblZpZXdwb3J0RGlyZWN0aXZlXSxcbiAgZXhwb3J0czogW0luVmlld3BvcnREaXJlY3RpdmVdXG59KVxuZXhwb3J0IGNsYXNzIEluVmlld3BvcnRNb2R1bGUge31cbiJdLCJuYW1lcyI6W10sIm1hcHBp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