
//////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////
// Switch apps from the firebase cli
firebase use <project_id>
//////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////
// DEPLOY 
// 1- 
firebase init
// 2- 
ng build --prod
// 3- 
firebase deploy
// ONLY HOSTING
firebase deploy --only hosting
// DEPLOY FUNCTIONS
firebase deploy --only functions
// DEPLOY CRON APP
gcloud app deploy app.yaml cron.yaml
//////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////
// BACK UP STORAGE
gsutil -m cp -R gs://kajimotomusic-prod.appspot.com .
gsutil -m cp -R gs://kajimotomusic-dev.appspot.com .
//////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////
// EXPORT ALL FIRESTORE DOCUMENTS
gcloud beta firestore export gs://kajimotomusicparis.com
gcloud beta firestore export gs://kajimoto-fabrice-bucket
gcloud beta firestore export gs://kajimotomusic-dev-bucket

gcloud beta firestore export gs://kajimotomusic-dev-bucket/
gcloud beta firestore export gs://kajimotomusic-dev-bucket/2019-03-11-static-pages-data

gcloud beta firestore export gs://kajimoto-fabrice-bucket/2019-03-11-static-pages-data

//////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////
// IMPORT ALL FIRESTORE DOCUMENTS
gcloud beta firestore import gs://[BUCKET_NAME]/[EXPORT_PREFIX]/
gcloud beta firestore import gs://kajimotomusicparis.com/2019-01-16T16:11:16_55380/
gcloud beta firestore import gs://kajimoto-fabrice-bucket/2019-02-23T10:15:27_5186/
gcloud beta firestore import gs://kajimoto-fabrice-bucket/collections/
gcloud beta firestore import gs://kajimotomusic-dev-bucket/collections/

gcloud beta firestore import gs://kajimotomusicparis.com/2019-03-11T13:24:15_19810/ --collection-ids='venues'

gcloud beta firestore import gs://kajimotomusicparis.com/2019-03-11T13:24:15_19810/

gcloud beta firestore import gs://kajimotomusic-dev-bucket/2019-03-11-static-pages-data/

gcloud beta firestore import gs://kajimotomusic-dev-bucket/2019-03-11-static-pages-data/


pM5WOREMHxxyaKECuGQh


// IMPORT SPECIFIC FIRESTORE COLLECTIONS
gcloud beta firestore import gs://[BUCKET_NAME]/[EXPORT_PREFIX]/ --collection-ids=[COLLECTION_ID_1],[COLLECTION_ID_2]
gcloud beta firestore import gs://kajimotomusic-dev-bucket/2019-03-11T14:11:24_98530/ --collection-ids=[pages],[publictoursdetails],[histories],[contacts]
gcloud beta firestore import gs://kajimotomusic-dev-bucket/2019-03-11T14:11:24_98530/ --collection-ids='pages','publictoursdetails','histories','contacts'
//////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////
// LIST FIRESTORE OPERATIONS
gcloud beta firestore operations list
//////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////
JSON MATTER
json-server --watch src/data/20180917-FS-ALLFROMPROD.json --port 4000
//////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////
//////////////////////////////////////////////////////////////////////////
CONFIG SCHEDULED IMPORT/EXPORT

gcloud projects add-iam-policy-binding kajimotomusic-prod --member serviceAccount:kajimotomusic-prod@appspot.gserviceaccount.com --role roles/datastore.importExportAdmin

gsutil iam ch serviceAccount:kajimotomusic-prod@appspot.gserviceaccount.com:storage.admin gs://kajimotomusicparis.com

gsutil iam ch serviceAccount:kajimotomusic-prod@appspot.gserviceaccount.com:storage.admin \
    gs://kajimotomusic-prod-backups
